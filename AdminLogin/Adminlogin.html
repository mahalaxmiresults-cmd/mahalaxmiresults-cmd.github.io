<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #041649, #041649);
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .login-container {
        width: 90%;
        max-width: 380px;
        background:#041649;
        padding: 30px 30px 35px;
        border-radius: 10px;
        /* box-shadow: 0 0 18px rgba(15, 15, 15, 0.3); */
        text-align: center;
    }
    .logo {
        width: 120px;
        margin-bottom: 15px;
    }
    h2 {
        color: #fff;
        margin-bottom: 25px;
        letter-spacing: 1px;
    }
    .field {
        width: 100%;
        margin-bottom: 18px;
    }
    .input {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 6px;
        background: rgba(247, 240, 240, 0.945);
        color: rgb(33, 7, 34);
        font-size: 16px;
        outline: none;
    }
    .login-btn {
        width: 100%;
        align-items: center;
        padding: 12px;
        border: none;
        border-radius: 6px;
        background: #4a8ef6;
        color: #fffffff5;
        font-size: 18px;
        cursor: pointer;
        margin-top: 10px;
        transition: 0.3s;
    }
    .login-btn:hover {
        background:#2d6edc;
    }
    .forgot {
        margin-top: 12px;
        display: block;
        color: #c9d4ff;
        font-size: 14px;
        text-decoration: none;
    }
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

const firebaseConfig = {
    apiKey: "AIzaSyA39tWy3eQ7sImuHthW36icGSRdcCbH_CE",
    authDomain: "mahalaxmi-result.firebaseapp.com",
    databaseURL: "https://mahalaxmi-result-default-rtdb.firebaseio.com",
    projectId: "mahalaxmi-result"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    let username = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();
    let errorBox = document.getElementById("error");

    const dbRef = ref(db);

    try {
        const snapshot = await get(child(dbRef, "admin"));  // FIXED
        if (snapshot.exists()) {
            let admin = snapshot.val();

            if (admin.username === username && admin.password === password) {

                localStorage.setItem("adminLogin", "true");


// FIXED REDIRECT
        window.location.href = "../AdminDashboard/Admin_Dashboard.html";





            } else {
                errorBox.textContent = "Incorrect Username or Password!";
            }

        } else {
            errorBox.textContent = "Admin data not found in Firebase!";
        }
    } catch (err) {
        errorBox.textContent = "Error connecting to server!";
        console.log(err);
    }
});
</script>

<!-- 
<script>
if (localStorage.getItem("adminLogin") !== "true") {
    window.location.href = "Adminlogin.html";
}
</script> -->

</head>
<body>

<div class="login-container">
    <img src="mahalaxmi logo 02.png" alt="Mahalaxmi Logo" class="logo"> <!-- Replace src path -->
    <h2>ADMIN LOGIN</h2>

    <form id="loginForm">
    <input type="text" id="username" class="input field" placeholder="Username" required>
    <input type="password" id="password" class="input field" placeholder="Password" required>
    <button type="submit" class="login-btn">Login</button>
</form>

<p id="error" style="color:red; margin-top:10px;"></p>

</div>

</body>
</html>
